var files,jsonPet_list=null,jsonPet_affiliation=null,level_bonus=0,percen_bonus=0,tame_chance=0,cards_used=0,cards_wasted=0,cards_tamed=0,success_rate=0;window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;var fs=null;function Iniciar(){try{$.ajax({url:"data/creature_table_simple.bin",async:!1,success:function(e){var a=window.atob(e);jsonPet_list=JSON.parse(a)}}),$.getJSON("data/affiliation_table.json",function(e){if(null!=(jsonPet_affiliation=e)){var a=$("#cboCreatureAffiliation");a.empty(),a.append("<option></option>"),jsonPet_affiliation.forEach(function(e){var n=$("<option>"+e.affiliation+"</option>").attr("value",e.affiliation_id);a.append(n)}),a.selectmenu().selectmenu("refresh",!0),a.val(12).change()}})}catch(e){console.log(e)}$(window).width(),$(window).height();$("#sliderRudra").change(function(){!0===$("#sliderRudra").is(":checked")&&$("#cboRing2").val("0").change(),Calcular_BounsLevel()}),$("#sliderRing2").change(function(){}),$("#cboRing1").bind("change",function(e,a){Calcular_BounsLevel()}),$("#cboRing2").bind("change",function(e,a){var n=parseInt($("#cboRing2").val());if(!0===$("#sliderRudra").is(":checked")&&n>0){$("#cboRing2").val("0");var t=$("#divLog").html();t+='<p><font color="red">Cant Equip This Ring while Rudra Set is on!</font></p>',$("#divLog").html(t)}Calcular_BounsLevel()}),$("#sliderEmblem").bind("change",function(e,a){Calcular_BounsLevel()}),$("#sliderGlasses").bind("change",function(e,a){Calcular_BounsLevel()}),$("#sliderSword").bind("change",function(e,a){Calcular_BounsLevel()}),$("#cboCTC_level").bind("change",function(e,a){Calcular_BounsLevel()}),$("#cboCTC_plus").bind("change",function(e,a){Calcular_BounsLevel()}),$("#cboCreatureAffiliation").bind("change",function(e,a){var n=$("#cboCreatureAffiliation").val();if(null!=jsonPet_list){var t=jsonPet_list.filter(e=>e.affiliation_id==n);if(null!=t){var o=$("#cboPetList");o.empty(),o.append("<option></option>"),t.forEach(function(e){e.species=e.species.replace("<","("),e.species=e.species.replace(">",")");var a=$("<option>"+e.species+"</option>").attr("value",e.tame_rate);o.append(a)}),o.selectmenu().selectmenu("refresh",!0)}}}),$("#cboPetList").bind("change",function(e,a){cards_used=0,cards_wasted=0,cards_tamed=0,success_rate=0,$("#divLog").html(""),$("#txtCardsUsed").val(cards_used),$("#txtCardsWasted").val(cards_wasted),$("#txtCardsTamed").val(cards_tamed),$("#txtSuccesRate").val(success_rate),Calcular_BounsLevel()}),$(document).on("click","#cmdTame",function(e){Calcular_BounsLevel();var a=Math.floor(1000001*Math.random()),n=$("#divLog").html();cards_used++,console.log(parseInt(tame_chance)+" / "+a),a<=tame_chance?(cards_tamed++,n+="<p>Try "+cards_used+': <font color="yellow">Tame Succesful!</font></p>'):(cards_wasted++,n+="<p>Try "+cards_used+": Tame Failed!</p>"),success_rate=100*cards_tamed/cards_used,$("#divLog").html(n),$("#txtCardsUsed").val(cards_used),$("#txtCardsWasted").val(cards_wasted),$("#txtCardsTamed").val(cards_tamed),$("#txtSuccesRate").val(success_rate.toFixed(2)+"%")}),$(document).on("click","#cmdInfo",function(e){console.log("info")}),$(document).on("click","#cmdIniciarSesion",function(e){window.location.reload()})}function Calcular_BounsLevel(){try{var e=parseFloat($("#cboPetList").val()),a=parseInt($("#cboCTC_level").val()),n=parseInt($("#cboCTC_plus").val()),t=$("#sliderRudra").is(":checked"),o=parseInt($("#cboRing1").val()),s=parseInt($("#cboRing2").val()),c=$("#sliderEmblem").is(":checked"),i=$("#sliderGlasses").is(":checked"),l=$("#sliderSword").is(":checked"),r=0,d=0,u=0,p=0;!0===t&&(r=3),!0===c&&(d=1e4),!0===i&&(u=1e4),!0===l&&(p=1e4),percen_bonus=d+u+p,tame_chance=.06*e*(a+(level_bonus=o+s+r)+.03*n+1)*100*1e4,tame_chance+=d+u+p,$("#txtBonusLevel").val("+"+level_bonus),$("#txtBonusPercen").val("+"+percen_bonus/1e4+"%"),$("#txtChance").val("You have "+(tame_chance/1e6*100).toFixed(3)+"% chances")}catch(e){console.log(e)}}function showPopUp(e,a){_state=e,1==a?$("#BeggersArentChoosers").show():$("#BeggersArentChoosers").hide(),1==e?($("#grpPet").hide(),$("#grpBoss").show(),$("#flipPetBossGrps").prop("checked",!0).flipswitch("refresh")):($("#grpPet").show(),$("#grpBoss").hide(),$("#flipPetBossGrps").prop("checked",!1).flipswitch("refresh")),$("#myPopup").popup("open",{positionTo:"window",transition:"flip"}),$("#cboPetChoose").focus()}function hidePopUp(){$("#myPopup").popup("close"),$("#contenido").show()}function ShowLoading(e){var a=setInterval(function(){$.mobile.loading("show",{textonly:"true",text:e,textVisible:!0,theme:"a",html:""}),clearInterval(a)},1)}function HideLoading(){var e=setInterval(function(){$.mobile.loading("hide"),clearInterval(e)},1)}function supports_html5_storage(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}