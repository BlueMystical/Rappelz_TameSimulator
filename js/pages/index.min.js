var files,jsonPet_list=null,jsonPet_affiliation=null,level_bonus=0,percen_bonus=0,tame_chance=0,cards_used=0,cards_wasted=0,cards_tamed=0,success_rate=0;window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;var fs=null;function Iniciar(){try{ShowLoading("Loading.."),$.ajax({url:"data/creature_table_simple.bin",async:!0,success:function(e){if(null!=(jsonPet_list=JSON.parse(window.atob(e)))){var a="",t=$("#searchPetList");t.empty(),jsonPet_list.forEach(function(e){a+="<li data-pet='"+JSON.stringify(e)+"'><a href='#'>"+e.species+"</a></li>"}),t.html(a),t.listview(),t.listview("refresh"),t.trigger("updatelayout")}}}),$.getJSON("data/affiliation_table.json",function(e){if(null!=(jsonPet_affiliation=e)){var a=$("#cboCreatureAffiliation");a.empty(),a.append("<option></option>"),jsonPet_affiliation.forEach(function(e){var t=$("<option>"+e.affiliation+"</option>").attr("value",e.affiliation_id);a.append(t)}),a.selectmenu().selectmenu("refresh",!0),a.val(12).change()}}),HideLoading()}catch(e){console.log(e)}$(window).width(),$(window).height();$("#cboCreatureAffiliation").bind("change",function(e,a){var t=$("#cboCreatureAffiliation").val();if(null!=jsonPet_list){var n=jsonPet_list.filter(e=>e.affiliation_id==t);if(null!=n){var i=$("#cboPetList");i.empty(),i.append("<option></option>"),n.forEach(function(e){var a=$("<option data-pet='"+JSON.stringify(e)+"'>"+e.species+"</option>").attr("value",e.pet_id);i.append(a)}),i.selectmenu().selectmenu("refresh",!0)}}}),$("#cboPetList").bind("change",function(e,a){cards_used=0,cards_wasted=0,cards_tamed=0,success_rate=0,$("#divLog").html(""),$("#txtCardsUsed").val(cards_used),$("#txtCardsWasted").val(cards_wasted),$("#txtCardsTamed").val(cards_tamed),$("#txtSuccesRate").val(success_rate),Calcular_BounsLevel()}),$("#searchPetList").on("click","li",function(){var e=JSON.parse($(this).attr("data-pet"));$(".ui-input-clear").trigger("click"),$("#cboCreatureAffiliation").val(e.affiliation_id).change(),$("#cboPetList").val(e.pet_id).change()}),$("#sliderRudra").change(function(){!0===$("#sliderRudra").is(":checked")&&$("#cboRing2").val("0").change(),Calcular_BounsLevel()}),$("#sliderRing2").change(function(){}),$("#cboLvBonus").bind("change",function(e,a){Calcular_BounsLevel()}),$("#cboRing2").bind("change",function(e,a){var t=parseInt($("#cboRing2").val());if(!0===$("#sliderRudra").is(":checked")&&t>0){$("#cboRing2").val("0");var n=$("#divLog").html();n+='<p><font color="red">Cant Equip This Ring while Rudra Set is on!</font></p>',$("#divLog").html(n)}Calcular_BounsLevel()}),$("#sliderEmblem").bind("change",function(e,a){Calcular_BounsLevel()}),$("#sliderGlasses").bind("change",function(e,a){Calcular_BounsLevel()}),$("#sliderSword").bind("change",function(e,a){Calcular_BounsLevel()}),$("#cboCTC_level").bind("change",function(e,a){Calcular_BounsLevel()}),$("#cboCTC_plus").bind("change",function(e,a){Calcular_BounsLevel()}),$(document).on("click","#cmdTame",function(e){Calcular_BounsLevel();var a=Math.floor(1000001*Math.random()),t=$("#divLog").html();cards_used++,console.log(parseInt(tame_chance)+" / "+a),a<=tame_chance?(cards_tamed++,t+="<p>Try "+cards_used+': <font color="yellow">Tame Succesful!</font></p>'):(cards_wasted++,t+="<p>Try "+cards_used+": Tame Failed!</p>"),success_rate=100*cards_tamed/cards_used,$("#divLog").html(t),$("#txtCardsUsed").val(cards_used),$("#txtCardsWasted").val(cards_wasted),$("#txtCardsTamed").val(cards_tamed),$("#txtSuccesRate").val(success_rate.toFixed(2)+"%")}),$(document).on("click","#cmdIniciarSesion",function(e){window.location.reload()})}function Calcular_BounsLevel(){try{var e=JSON.parse($("#cboPetList").find(":selected").attr("data-pet")),a=parseFloat(e.tame_rate),t=parseInt($("#cboCTC_level").val()),n=parseInt($("#cboCTC_plus").val()),i=parseInt($("#cboLvBonus").val()),o=$("#sliderRudra").is(":checked"),s=$("#sliderEmblem").is(":checked"),c=$("#sliderGlasses").is(":checked"),l=$("#sliderSword").is(":checked"),r=0;!0===o&&(i+=3),!0===s&&(r+=1e4),!0===c&&(r+=1e4),!0===l&&(r+=1e4),tame_chance=.06*a*(t+(level_bonus=i)+.03*n+1)*100*1e4,tame_chance+=r,$("#txtBonusLevel").val("Creatur Taming lv "+t+" +"+level_bonus),$("#txtBonusPercen").val("+"+r/1e4+"% extra"),$("#txtChance").val("You have "+(tame_chance/1e6*100).toFixed(3)+"% chances")}catch(e){console.log(e)}}function showPopUp(e,a){_state=e,1==a?$("#BeggersArentChoosers").show():$("#BeggersArentChoosers").hide(),1==e?($("#grpPet").hide(),$("#grpBoss").show(),$("#flipPetBossGrps").prop("checked",!0).flipswitch("refresh")):($("#grpPet").show(),$("#grpBoss").hide(),$("#flipPetBossGrps").prop("checked",!1).flipswitch("refresh")),$("#myPopup").popup("open",{positionTo:"window",transition:"flip"}),$("#cboPetChoose").focus()}function hidePopUp(){$("#myPopup").popup("close"),$("#contenido").show()}function ShowLoading(e){var a=setInterval(function(){$.mobile.loading("show",{textonly:"true",text:e,textVisible:!0,theme:"a",html:""}),clearInterval(a)},1)}function HideLoading(){var e=setInterval(function(){$.mobile.loading("hide"),clearInterval(e)},1)}function supports_html5_storage(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}